# MT45TradeCopy
MT4/5一拖N跟单系统使用说明（适用于Windows版的MT4/MT5）

1、本跟单软件的优势：

①、市面常见跟单软件必需收集你的平台名/服务器名/账号/交易密码，就是拿账号登录信息直接在服务器上运行你的账号，所有信息全部泄露了，安全得不到任何保障。但是本跟单软件不需要收集，自己部署在局域网电脑或云主机远程跟单均可，不泄漏任何账户信息。

②、市面常见跟单软件按月收费、按跟单账户数量收费等等各种收费，还有各种限制。本跟单软件完全免费，且不限制跟单账号数量，一拖十万个账号跟单都OK。

③、一拖N也可，N拖M也可(即多个账户同时做信号源)，互不干扰，角色你自己任意分配，可以同向跟单、反向跟单、按比例倍数跟单，任意设置。

④、无平台限制，无论哪家经纪商的账号均可跟单。仅需把IP均指向桥服务主机IP即可。

⑤、任何人都可把桥服务，放在云主机上，搭建一个属于自己的跟单平台社区。

⑥、本软件支持高并发，每秒十万并发无压力。

本软件设计初衷是: 既可1个信号源账户拖N个跟随账号交易、也可多个信号源拖N个跟随账户，可跨MT4/5、可跨经纪商、可跨模拟/真实账户。
对于已写有MQL4语言EA的交易者，但没精力去转换成MQL5语言,可用MT4挂EA当信号源去拖MT5的账号跟单；
反之已写有MQL5语言EA交易者,没精力去转换成MQL4语言，也可用MT5挂EA当信号源去拖MT4账号跟单，如此达到在任意一个平台写的EA在两个平台上运行的等效效果。
跟单最大用途就是一拖N。至于说去跟别人的单是个伪命题，从概率上讲做交易真正能稳定盈利的人万里挑一，放弃自己去跟别人的单风险极大，几乎都是以爆仓告终。
但要注意：同一个账号要么当主、要么当从。若一个账号既当信号又当跟随自己跟自己，则构成死循环，这种毫无意义。

下文以MT5为例讲解，MT4仅放置目录不同，MT5放在Services目录，MT4放在Scripts目录。MT4/MT5均可做信号源端或跟随端，可多个账户当信号源。下文不赘述。

2、目录结构介绍(适用于64-bit-Windows，MT4/5）

①、BridgeSvr.exe：”桥服务”程序，它可放在云主机或局域网内主机，它要最先启动;

②、Master：主端-信号源使用，2个文件拷到信号账号Services目录（在Experts目录同级）;

③、Slave：从端-跟随者使用，2个文件拷到跟随账号的Services目录（在Experts目录同级）;

关键：把每个账号的MT4/5客户端单独安装、以账号名区分安装路径，保证多个账号能同时登录终端，每个账号终端安装完，先改它的桌面快捷方式以账号命名便于区分;

④、System32：此目录3个DLL是微软运行时库，先拷贝到操作系统system32目录下。如果遇到加载服务时提示DLL无法加载，先安装微软运行时库合集：MSVBCRT_AllInOne。


总结就是一句话：
Master两文件放信号源账号Services目录。Slave两文件放跟随账号Services目录。(注意MT4放Scripts目录)。各拷贝2个文件进去即可。
复制进去后在MT4/5终端导航页选中服务或脚本项，鼠标右键刷新即可显示。下文内容均围绕着这一句话展开。

3、怎么把文件拷贝到Services目录(MT4是放在Scripts目录)，如下图：

①、先点击MT4/5工具栏的IDE，等待3秒启动IDE编辑器:

②、然后在打开的IDE编辑器中，打开对应目录Services：

如果你是MT4客户端，请复制MT4目录的文件到Scripts目录，如下图

③、打开目录后，把两文件拷贝到目录。然后关闭IDE编辑器窗口,去导航页刷新。

4、MT5如何添加服务，选中服务，鼠标右键添加服务即可。

主端和从端添加方法一样，请自行添加。勾上允许DLL导入(如果是MT4客户端,则导航页找到脚本项，选中脚本文件->右键->添加到图表 即可)

如果你是MT4，在MT4->工具->选项->EA交易，勾上”允许DLL导入”,如下图：


5、跟随端的桥服务器IP修改、跟单方向、跟单比例系数修改
进入：菜单栏->工具->全局变量。示例如下：IP格式四段式（如：192.168.0.199）,请填整数。如果桥服务程序就在本机运行，IP就填127.0.0.1

修改之后点关闭，如果连接断开，服务会自动隔10秒重新加载最新IP去连接，无需重启。
FollowDirection设跟单方向，1=正向跟单，-1=反向跟单；
FollowMode设下单模式1=固定手数下单(缺省)，0=比例模式下单;
ScaleFactor比例模式下单时，下单的比例系数；
FollowFixedLots固定手数下单模式时，下单的手数。
如果你想始终以固定最小交易量0.01手下单，直接设FollowMode=1.0固定手数下单模式，然后FollowFixedLots填固定下单手数0.01即可。

6、“算法交易”要启用，否则无法正常跟单。如下图

①、首先是工具栏上的“算法交易”要启用

②、其次在导航->服务->选择服务右键属性，“算法交易”也要启用，否则无法跟单


7、启动顺序：最先启动桥服务BridgeSvr.exe程序，然后启动主账户Master服务，最后启动跟随账户的slave服务，等待下方窗口:工具箱->专家页->打印出xxx is runnning...即可

8、为了避免每次启动MT4/5误跟单，每次退出前, 请先手工停止服务，见上图菜单“停止”。

9、如果是跨电脑主机，需要在桥服务运行的主机防火墙中添加入站规则，允许端口接入。

如果电脑有防火墙放开4个端口：41818、41888、51818、51888，没有安装防火墙则不需要这步。
新版本WINDOWS操作系统都自带防火墙，请在我的电脑属性->隐私和安全性->Windows安全中心->防火墙和网络保护->高级设置->入站规则，
鼠标右键，新建规则->端口->TCP, 特定端口填41818、41888、51818、51888,四个端口号用英文半角逗号隔开->允许连接->域专用公用全勾上->填上名字:跟单服务,
描述部分也填跟单服务->完成。即可。如果是桥服务在云主机上运行，入站/出站规则添加方法完全类似。


10、架构图
（详细见说明书）

无论是Master侧、还是Slave侧、全局变量中的BridgeSvrIP，都指向桥服务所运行的电脑IP。
桥服务是信号账户端与跟随账户端的通讯通道，所有账户IP都填它就自动连通了，无论在全球哪个角落。



11、支持跟单交易的品种

目前已测验支持如下159个主流交易品种，软件本身不限制品种数量。
不同平台合约品种名,带不同后缀,比如：x,m, z, .s,.c, .i,.r,.G....,跟单软件可自动适配。

如果你的跟单账户在多个不同平台，先确保交易的品种代码在不同平台上相同且可交易，且也包含在上述159个交易品种里面。
不同平台品种代码带不同后缀无所谓，软件可自动适配。
只验证了159个，但实际上软件并不限制品种数量，也就是可支持平台所有可交易品种。
如果用户还需要增加其它特殊功能，请电邮Email:251210269@qq.com增加。

12、跟随端指定信号源ID跟单(分组跟单)

前面部分讲的是全跟单场景。要么是一个信号源账户拖N个跟随者账户，要么是N个信号源账户拖M个跟随账户。
总之，多个信号源的开平单，所有的跟随者账户都会跟单。类似广播一样。

另外一个是分组跟单场景、跟随者只跟指定信号源。


比如：
有A、B、C三个信号源账户，300个跟随者账户要分三组跟单，

前100个跟随者账户跟随着A信号源账户跟单，

中100个跟随者账户跟随B信号源账户跟单，

后100个跟随者账户跟随C信号源账户跟单.....


显然，在3个不同主机上挂桥服务，让3个分组跟随账户分别指向3个不同的桥服务主机IP也可以分组跟单。
但这种方式需要部署3台主机，增加了运维成本。另一种更为灵活的方案是，在同一个桥服务内部支持多信号源与多跟随者的分组匹配关系。
通过配置规则将跟随者账户按需分配至对应的信号源账户，实现逻辑上的分组跟单。

一个桥服务主机来实现分组跟单，是用SignalID值匹配来划分分组。
分组跟单只需把信号源和跟随者的[菜单->工具->全局变量->SignalID字段值]，改成一样，即完成分组跟单。

比如：

前100个跟随者账户的SignalID都改成111，A信号源账户的SignalID也修改成111；

中100个跟随者账户的SignalID都改成222，B信号源账户的SignalID也修改成222；

后100个跟随者账户的SignalID都改成333，C信号源账户的SignalID也修改成333；

......

总之就是用SignalID值匹配。跟随者订阅的SignalID值，跟哪个信号源SignalID值一致，就只跟哪个信号源的单。
这个SignalID值用户自己随便定义多少都行，关键是要信号源与跟随者的SignalID值相同来匹配。

如果要恢复到全跟单模式，只需要将跟随者的SignalID值修改成0，就是全跟单了。

13、跟随端指定多个信号源ID同时跟单

上面讲了在跟随端，只跟一个指定信号源ID的单。本段讲同时指定多个信号源跟单。
在跟随端，按F3进入全局变量,也可从菜单->工具->全局变量。
然后点击“添加”按钮。如下图。添加变量名格式：SignalID+序号，不限信号源个数，可同时跟随多个信号源的单。

增加或修改完后，把全局变量”SignalSubscribe”的值，改为任意非0值即时上报订阅的信号源ID.即时生效。

14、如何让朋友跟单？

A、只需要告知你运行桥服务的云主机IP即可。你朋友只跟单，只需在MT4/5上添加slave服务的2个文件即可，然后把桥IP填你的那个云主机IP.

B、如果你是多个账户挂EA当信号源，你只需把每个挂EA的账号设置不同的SignalID值，让不同的朋友跟随不同的信号，让不同的朋友账户填不同的SignalID值即可。SignalID为0就是全部信号源的单都跟。

C、如果你公司有多个优秀操盘手，让每个操盘手拖一万个跟单账户，也可以。跟单账户们的桥服务IP和SignalID，保持跟这个操盘手的信号账户的桥服务IP和SignalID一致即可。


15、软件包保持更新的下载链接

①、https://download.csdn.net/download/L251210269/90958775

②、https://github.com/linzhihui/MT45TradeCopy

注意每个软件包是独立版本，不同版本不可交错搭配使用。


16、推荐一个赚大赔小的交易策略
首先必须在思想上杜绝用单个账户重仓干的赌徒做法。采用1拖N的玩法： 把信号源账户永远只放10，把N个跟随账户各放1000。永远只操作信号源账户，跟随账户只同步跟单。当信号源账户蒙对了赚钱了，那么N个跟随账户就翻N倍的赚。当信号源账户爆仓了那就只亏10，这样所有跟单账户就只亏了1%。在信号源端就把风险给掐死了，把人性关进笼子里了。只有这种玩法，才能保证赚大赔小，才能真正赚到钱。不然呢？全部资金压在单账户操作，当你看到还有足够的钱，你一定会不断补仓，导致更严重亏损，克服不了人性弱点。

17、推荐几种部署方式

①、仅把桥服务放在云主机上。把信号源账号和跟随者账号全都放在局域网主机上。这样桥连通各个角落的账号，相互之间可跟单交易，各自账号密码不泄露极其安全。仅需对外公开桥服务主机的IP、和需要公开的信号源端的SignalID即可。

②、把桥服务、信号源账号、跟随者账号，全放在云主机上跑。目前其它跟单平台的做法，先采集信号源和跟随者的账号+密码+服务器。然后各账号在自己电脑上交易。这种所有账户隐私安全无法保障，极不推荐。除非是你自己的云主机，且所有账号全都是自己的。

③、只把桥服务和信号源账号都挂在云主机上，跟随者账号挂在局域网主机上。然后信号源账号可在手机端或电脑上登录交易，且无需再挂服务。同一账号多个登录实例，无需重复挂服务，仅需在云主机上跑的那个登录实例挂了服务即可

④、同一账号多个登录实例运行不同策略的EA, 只需其中一个登录实例挂载master服务即可。其它多个登录实例EA产生的订单会自动同步，通过那个挂载了master服务的账号登录实例去上报订单，所有登录实例EA的订单上报都共用了这一个实例的SignalID。

⑤、不同策略EA登录不同账号去当信号源，这是推荐的做法。试想一下：如果你用同一账号的多个登录实例去跑不同策略EA，把每一个登录实例的SignalID填不一样，表面上区分开了，但因为MT4/5会同步同一账号的多个登录端的订单列表，导致每个登录实例都会把不同登录端产生订单上报一遍（同一个订单号被不同登录实例各上报一遍），这样SignalID就失去意义了。推荐做法是不同策略使用不同账号。这样才能区分。


总之记住一点：相同账号的多个登录实例，只要其中一个挂载了服务在运行，其它电脑端或手机端就不需再重复挂服务了，因为MT4/MT5会自动同步相同账号的多个登录端的订单。


18、MT4终端常见的问题

这里强调的是MT4，因为只有MT4有这个问题，在切换周期的时候会停止Script脚本，导致master被移除，信号源无法正常工作。因为MT4没有Service类型程序，但我们又不能去占EA的位置。MT5上不存在这样的问题的，因为MT5是Service类型，切换周期不会停掉master服务。所以在MT4上信号源端的推荐做法是：MT4在信号源账号登录后，添加master到图表之后保持不动。然后在另外一个终端上登录这个账号新实例去做交易，比如在手机端或PC端，不管是人工交易还是挂EA交易均可，因为同一个账号可以登录多个实例，只需要其中一个实例挂上了master服务即可。当然MT5更可以如此了。
我推荐的做法是：无论MT4还是MT5，始终在云主机上登录着你的账号实例保持不动(挂上服务）。然后你在自己家电脑或手机上登录账号实例(无需再挂服务)。你手工交易不受影响，也不影响你跟单交易。

19、一键拷贝到目录工具
直接运行工具：CopyFilies2MT45Folder.exe，点一下拷贝按钮。跟单文件就自动拷贝到了本机安装的所有的MT4和MT5目录了，无论你安装了多少个终端软件。这样上文提到的人工拷贝跟单文件到各个MT4和MT5终端目录的工作，就一键完成了。
然后在另外一个终端上登录这个账号新实例去做交易，比如在手机端或PC端，不管是人工交易还是挂EA交易均可，因为同一个账号可以登录多个实例，只需要其中一个实例挂上了master服务即可。当然MT5更可以如此了。



